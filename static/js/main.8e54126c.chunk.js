(this["webpackJsonppiano-tiles"]=this["webpackJsonppiano-tiles"]||[]).push([[0],{61:function(t,e,n){},62:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n(24),r=n.n(a),o=n(9),c=n(88),h=n(17),s=n(34),l=n(30),d=n.n(l),u=n(82),f=n(84),j=n(86),b=n(63),g=n(85),v=n(2),w={maxWidth:600,tilesQuantity:{width:4,height:4},showKeyboardOrGamepadHints:!0},m={1:"A A",2:"S B",3:"D X",4:"F Y",5:"G up",6:"H down",7:"J left",8:"K right"},x=function(){return d.a.random(w.tilesQuantity.width-1)},O=Object(u.a)({canvas:{width:"100%",height:"100vh",overflow:"hidden",maxWidth:w.maxWidth},score:{position:"fixed",top:0,left:0,right:0,fontFamily:"Graduate",fontWeight:"bold",pointerEvents:"none"},backButton:{position:"fixed",top:0,left:0,fontSize:"1.2em"}}),p=function(){var t=O(),e=Object(i.useRef)(null),n=Object(i.useState)(0),a=Object(h.a)(n,2),r=a[0],o=a[1];return Object(i.useEffect)((function(){var t=e.current,n=t.getContext("2d"),i=function(){return{width:t.width/a.width,height:t.height/a.height}},a=w.tilesQuantity,r=d.a.times(a.height+1,x),c=0,l="touch",u=function(){n.clearRect(0,0,t.width,t.height),n.lineWidth=.5,n.beginPath();var e=i(),o=c*e.height;d.a.times(a.width,(function(e){var i=e/a.width*t.width;n.moveTo(i,0),n.lineTo(i,t.height)})),d.a.times(a.height,(function(i){var a=i*e.height+o;n.moveTo(0,a),n.lineTo(t.width,a)})),n.stroke();if(r.forEach((function(t,i){var a=r.length-1-i;!function(t,i,a){void 0!==a&&(n.fillStyle="#afaeae");var r={x:t*e.width,y:i*e.height+o};n.fillRect(r.x,r.y,e.width,e.height),n.fillStyle="black",a&&n.fillRect(r.x+a,r.y+a,e.width-2*a,e.height-2*a)}(t,i-1,0===a?0:1===a&&o?Math.min(o,10):void 0)})),"touch"!==l&&w.showKeyboardOrGamepadHints){n.fillStyle="white",n.font="60px sans-serif",n.textAlign="center";var h=r.slice(-2)[0]+1,s=a.width>4?h.toString():m[h].split(" ")[0];n.fillText("keyboard"===l?s:m[h].split(" ")[1],e.width*r.slice(-2)[0]+e.width/2,e.height*(a.height-2)+e.height/2),n.fillStyle="black"}},f=function(){t.width=Math.min(window.innerWidth,w.maxWidth),t.height=window.innerHeight,u()};f();var j=function(t){if(t===r.slice(-2)[0]){o((function(t){return t+1}));var e=setInterval((function(){(c+=.15)>=1&&(clearInterval(e),c=0,r.pop(),r.unshift(x())),u()}),5)}else console.log("Wrong tile",t,r.slice(-2)[0]),o(0);u()},b=function(e){l="touch",function(e){var n=e.clientY,r=e.clientX,o=n,c=i();if(!(o<(a.height-2)*c.height||o>(a.height-1)*c.height)){var h=Math.ceil(r/(t.width/a.width))-1;j(h)}}({clientY:e.offsetY,clientX:e.offsetX})},g=function(t){return t.preventDefault()};window.addEventListener("resize",f),t.addEventListener("pointerdown",b),t.addEventListener("touchstart",g);var v=new s.b,O=new s.a,p=!0,y=setInterval((function(){var t=!1;for(var e in m){var n=m[e].split(" "),i=Object(h.a)(n,2),a=i[0],r=i[1];if(Object(s.c)(v.key(a),v.key(e),O.button(r)).query()){t=!0,p&&j(+e-1);break}}p=!t,t&&O.isConnected()&&(l="gamepad")}),10),k=function(){l="keyboard",u()};return window.addEventListener("keydown",k),function(){window.removeEventListener("resize",f),t.removeEventListener("pointerdown",b),t.removeEventListener("touchstart",g),window.removeEventListener("keydown",k),clearInterval(y)}}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(f.a,{className:t.backButton,hidden:0!==r,href:"/",color:"primary",children:[Object(v.jsx)(g.a,{}),"Back"]}),Object(v.jsx)(j.a,{container:!0,justifyContent:"center",children:Object(v.jsx)("canvas",{ref:e,className:t.canvas})}),Object(v.jsx)(b.a,{align:"center",color:"error",className:t.score,variant:"h3",children:r})]})},y=n(46),k=n(36),S=n(90),E=n(89),G=n(87),L=[{label:"Peak",id:"peak"}],C=function(t){return Object(v.jsx)(b.a,Object(y.a)({gutterBottom:!0,align:"center"},t))},W=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(j.a,{container:!0,direction:"column",justify:"flex-start",alignContent:"center",style:{padding:50},children:[Object(v.jsx)(C,{variant:"h3",children:"Piano Tiles online"}),Object(v.jsx)(C,{variant:"h5",color:"textSecondary",children:"Select Game Mode"}),L.map((function(t){var e=t.id,n=t.label;return Object(v.jsx)(f.a,{component:k.a,to:"/game/".concat(e),variant:"outlined",size:"large",children:n},e)})),Object(v.jsx)(C,{variant:"h5",color:"textSecondary",children:"Game Grid Configuration"}),Object(v.jsxs)(j.a,{container:!0,style:{width:"auto"},children:[["width","height"].map((function(t){var e="height"===t?2:1;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(b.a,{children:t}),Object(v.jsx)(S.a,{defaultValue:w.tilesQuantity[t],valueLabelDisplay:"auto",step:1,min:e,max:8,onChange:function(e,n){return w.tilesQuantity[t]=n},marks:!0},t)]})})),Object(v.jsxs)(b.a,{children:[Object(v.jsx)(E.a,{defaultChecked:w.showKeyboardOrGamepadHints,onChange:function(t,e){return w.showKeyboardOrGamepadHints=e}}),"Show keyboard & gamepad hints"]})]}),Object(v.jsx)(G.a,{color:"textSecondary",href:"https://github.com/zardoy/piano-tiles",style:{position:"absolute",bottom:0,right:0},children:"View on GitHub"})]})})},H=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(c.a,{}),Object(v.jsx)(o.a,{children:Object(v.jsxs)(o.e,{children:[Object(v.jsx)(o.c,{path:"/",exact:!0,children:Object(v.jsx)(W,{})}),Object(v.jsx)(o.c,{path:"/game/:modeId",children:Object(v.jsx)(p,{})}),Object(v.jsx)(o.b,{from:"/",to:"/"})]})})]})};n(61);r.a.render(Object(v.jsx)(H,{}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.8e54126c.chunk.js.map